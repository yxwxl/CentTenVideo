# Flask API 使用说明

> **端口默认在 127.0.0.1:3000**

API 可以通过端口调用的方式使用，也可以直接在 `util` 文件夹中引用相关代码。

## 使用示例

- 访问 `127.0.0.1:3000/getChannels` 即可获得频道 ID。
- 部分接口需要传递正确的参数，请参阅代码使用。所有接口默认是 `GET` 请求，但可以修改为 `POST` 请求。

---

### API 说明

#### getChannels.py

- **功能**：获取对应频道 ID 的接口。

#### getSearch.py

- **功能**：搜索 API，提供附加文本信息，返回对应的搜索结果（如腾讯视频的搜索框）。

#### getSingleVideoList.py

- **功能**：获取单个视频（如《斗破苍穹》）所有集数的页面 `vid`。

  **示例**：将以下部分组合即可获得完整视频地址：

  - https://v.qq.com/x/cover/ + mzc002007sqbpce + / + r4100zvgz9i + .html

- `cid`: `mzc002007sqbpce` (确定的单个视频)
- `vid`: `r4100zvgz9i` (每一集不同)

#### getVideoListAddress.py

- **功能**：获取视频列表，一次返回 21 个视频。输入频道 ID 和索引（index）下标返回相应视频列表。
- **默认排序**：按热门排序。

#### getVideoM3u8.py

- **功能**：核心模块，默认不启用。请先阅读使用说明后启用。

- 支持多用户同时访问，并将用户按队列顺序请求 `m3u8`。
- 显示前方排队用户数量。
- 支持将当天的 `m3u8` 缓存在内存中。
- 单用户访问耗时大约 15-20 秒。

#### `getVideoM3u8.py` 中 `getM3U8Url` 函数

- **核心参数**：此函数的参数设置至关重要，请参考代码注释和文档进行配置。
